# Персональный Совет Директоров — Telegram-бот

Node.js-бот для Telegram, который формирует «виртуальный совет директоров» из трёх экспертов, подобранных ИИ под конкретную ситуацию пользователя. Использует модель `claude-sonnet-4-5-20250929` (Anthropic) и работает в демо-режиме с лимитом 10 ответов.

## Возможности
- Первое сообщение — просьба описать жизненную/рабочую/бизнесовую ситуацию на русском.
- Автоматический подбор 5 релевантных публичных персон (предприниматели, мыслители, артисты и т.д.) с разными углами зрения.
- Пользователь выбирает 3 экспертов; их стиль речи и принципы учитываются в ответах.
- Совет отвечает на языке пользователя (после первого сообщения язык определяется автоматически).
- Лимит 10 пар сообщений после выбора экспертов; по окончании демо администратор получает уведомление и стенограмму.

## Требования
- Node.js 18+
- Аккаунт в Telegram для бота и токен BotFather
- Ключ Anthropic (модель Claude Sonnet)

## Установка
```bash
npm install
```

## Конфигурация
Задайте переменные окружения (например, через `.env` или Railway Dashboard):

```
telegram_token=ваш_telegram_бот_токен
anthropic_api_key=ключ_anthropic
admin_telegram_id=ID_админа
webhook_url=опционально_для_webhook
```

## Запуск локально
```bash
npm run start
```
По умолчанию используется long polling и небольшой Express-сервер (`/health`) для проверок Railway.

## Деплой на Railway
1. Подключите репозиторий `alexstashenko/sovet_directorov`.
2. Установите переменные окружения (см. выше).
3. Railway автоматически выполнит `npm install` и `npm run start`.

## Структура
- `src/bot.js` — Telegraf-бот, логика этапов (описание, выбор, Q&A, завершение демо).
- `src/personaGenerator.js` — генерация списка персон через Anthropic.
- `src/responseBuilder.js` — основная логика ответа совета.
- `src/sessionStore.js` — in-memory сессии (для продакшена можно заменить на Redis).
- `src/index.js` — точка входа: запуск бота + HTTP healthcheck.

## Лицензия
MIT (при необходимости обновите). Будьте осторожны с хранением ключей и переписок. После отправки администратору логи демо-сессий очищаются. 